{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucas\\\\Downloads\\\\Macautec-Jeimy-Cliente\\\\src\\\\components\\\\reporte.component.js\";\nimport React, { Component } from \"react\";\nimport axios from 'axios';\nimport Table from 'react-bootstrap/Table';\nimport Form from 'react-bootstrap/Form';\nimport CitaReporteTableRow from './CitaReporteTableRow';\nexport default class Reportes extends Component {\n  constructor(props) {\n    super(props); // Setting up functions\n\n    this.onChangeFechadesde = this.onChangeFechadesde.bind(this);\n    this.onChangeFechahasta = this.onChangeFechahasta.bind(this);\n    var dentro_un_mes = new Date();\n    dentro_un_mes.setMonth(dentro_un_mes.getMonth() + 1);\n    dentro_un_mes = dentro_un_mes.toISOString().split('T')[0];\n    console.log('dentro_un_mes: ' + dentro_un_mes);\n    var hace_un_mes = new Date();\n    hace_un_mes.setMonth(hace_un_mes.getMonth() - 1);\n    hace_un_mes = hace_un_mes.toISOString().split('T')[0];\n    console.log('hace_un_mes: ' + hace_un_mes);\n    this.state = {\n      fecha_desde: hace_un_mes,\n      fecha_hasta: dentro_un_mes,\n      servicio_mas: {},\n      servicio_menos: {},\n      servicios_completos: 0,\n      lista_asignaciones: []\n    };\n  }\n\n  obtenerDatosReportes(desde, hasta) {\n    var filtro = desde + '/' + hasta; //console.log('filtrofecha: '+this.state.fecha_desde+'/'+this.state.fecha_hasta);\n\n    axios.get('http://localhost:4000/citas/servicio-mas-solicitado/' + filtro).then(res => {\n      if (res.data[0] != null) this.setState({\n        servicio_mas: {\n          nombre: res.data[0]._id,\n          conteo: res.data[0].conteo\n        }\n      });else this.setState({\n        servicio_mas: {\n          nombre: 'No hay servicios en el rango',\n          conteo: 0\n        }\n      });\n      console.log(this.state.servicio_mas);\n    }).catch(error => {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/citas/servicio-menos-solicitado/' + filtro).then(res => {\n      if (res.data[0] != null) this.setState({\n        servicio_menos: {\n          nombre: res.data[0]._id,\n          conteo: res.data[0].conteo\n        }\n      });else this.setState({\n        servicio_menos: {\n          nombre: 'No hay servicios en el rango',\n          conteo: 0\n        }\n      });\n      console.log(this.state.servicio_menos);\n    }).catch(error => {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/citas/servicios-completos/' + filtro).then(res => {\n      if (res.data[0] != null) this.setState({\n        servicios_completos: res.data[0].conteo\n      });else this.setState({\n        servicios_completos: 0\n      });\n      console.log(this.state.servicios_completos);\n    }).catch(error => {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/citas/servicios-mecanico-por-dia/' + filtro).then(res => {\n      this.setState({\n        lista_asignaciones: res.data\n      });\n      console.log(this.state.lista_asignaciones);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  onChangeFechadesde(e) {\n    console.log('desde ' + e.target.value);\n    this.setState({\n      fecha_desde: e.target.value\n    });\n    this.obtenerDatosReportes(e.target.value, this.state.fecha_hasta);\n  }\n\n  onChangeFechahasta(e) {\n    console.log('hasta ' + e.target.value);\n    this.setState({\n      fecha_hasta: e.target.value\n    });\n    this.obtenerDatosReportes(this.state.fecha_desde, e.target.value);\n  }\n\n  componentDidMount() {\n    this.obtenerDatosReportes(this.state.fecha_desde, this.state.fecha_hasta);\n  }\n\n  DataTable() {\n    if (this.state.lista_asignaciones.length > 0) return this.state.lista_asignaciones.map((res, i) => {\n      return React.createElement(CitaReporteTableRow, {\n        obj: res,\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      });\n    });else return React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"No existen asignaciones para servicio en este rango de fechas\");\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Reportes\"))))), React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"Desde\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Desde\")), React.createElement(Form.Control, {\n      type: \"Date\",\n      value: this.state.fecha_desde,\n      onChange: this.onChangeFechadesde,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"Hasta\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Hasta\")), React.createElement(Form.Control, {\n      type: \"Date\",\n      value: this.state.fecha_hasta,\n      onChange: this.onChangeFechahasta,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    })))))), React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"ServicioMas\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Servicio mas solicitado\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, this.state.servicio_mas.nombre, ' ')), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Total:\"), \" \", this.state.servicio_mas.conteo)))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"ServicioMenos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Servicio menos solicitado\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, this.state.servicio_menos.nombre, ' ')), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Total:\"), \" \", this.state.servicio_menos.conteo)))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"ServiciosCompletos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Servicios completos\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Total:\"), \" \", this.state.servicios_completos))))))), React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Lista de Mecanicos y sus asignaciones por dia\"))))), this.DataTable());\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\lucas\\Downloads\\Macautec-Jeimy-Cliente\\src\\components\\reporte.component.js"],"names":["React","Component","axios","Table","Form","CitaReporteTableRow","Reportes","constructor","props","onChangeFechadesde","bind","onChangeFechahasta","dentro_un_mes","Date","setMonth","getMonth","toISOString","split","console","log","hace_un_mes","state","fecha_desde","fecha_hasta","servicio_mas","servicio_menos","servicios_completos","lista_asignaciones","obtenerDatosReportes","desde","hasta","filtro","get","then","res","data","setState","nombre","_id","conteo","catch","error","e","target","value","componentDidMount","DataTable","length","map","i","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from 'axios';\nimport Table from 'react-bootstrap/Table';\nimport Form from 'react-bootstrap/Form';\nimport CitaReporteTableRow from './CitaReporteTableRow';\n\nexport default class Reportes extends Component {\n\n  constructor(props) {\n    super(props)\n\n    // Setting up functions\n    this.onChangeFechadesde = this.onChangeFechadesde.bind(this);\n    this.onChangeFechahasta = this.onChangeFechahasta.bind(this);\n\n    var dentro_un_mes = new Date();\n    dentro_un_mes.setMonth(dentro_un_mes.getMonth()+1);\n    dentro_un_mes = dentro_un_mes.toISOString().split('T')[0];\n    console.log('dentro_un_mes: '+dentro_un_mes)\n\n    var hace_un_mes = new Date();\n    hace_un_mes.setMonth(hace_un_mes.getMonth()-1);\n    hace_un_mes = hace_un_mes.toISOString().split('T')[0];\n    console.log('hace_un_mes: '+hace_un_mes)\n\n    this.state = {\n      fecha_desde: hace_un_mes,\n      fecha_hasta: dentro_un_mes,\n      servicio_mas: {},\n      servicio_menos: {},\n      servicios_completos: 0,      \n      lista_asignaciones: []\n    };\n    \n  }\n\n  obtenerDatosReportes(desde, hasta){\n\n    var filtro = desde+'/'+hasta\n\n    //console.log('filtrofecha: '+this.state.fecha_desde+'/'+this.state.fecha_hasta);\n    axios.get('http://localhost:4000/citas/servicio-mas-solicitado/'+filtro)\n      .then(res => {\n        if(res.data[0] != null)\n          this.setState({\n            servicio_mas: {nombre : res.data[0]._id, conteo:res.data[0].conteo }\n          });\n        else\n          this.setState({\n            servicio_mas: {nombre : 'No hay servicios en el rango', conteo:0 }\n          });\n        console.log(this.state.servicio_mas);\n      })      \n      .catch((error) => {\n        console.log(error);\n      });\n\n    axios.get('http://localhost:4000/citas/servicio-menos-solicitado/'+filtro)\n      .then(res => {\n        if(res.data[0] != null)\n          this.setState({\n            servicio_menos: {nombre : res.data[0]._id, conteo:res.data[0].conteo }\n          });\n        else\n          this.setState({\n            servicio_menos: {nombre : 'No hay servicios en el rango', conteo:0 }\n          });\n        console.log(this.state.servicio_menos);\n      })      \n      .catch((error) => {\n        console.log(error);\n      });\n\n    axios.get('http://localhost:4000/citas/servicios-completos/'+filtro)\n      .then(res => {\n        if(res.data[0] != null)\n          this.setState({\n            servicios_completos: res.data[0].conteo\n          });\n        else\n          this.setState({\n            servicios_completos: 0\n          });\n        console.log(this.state.servicios_completos);\n      })      \n      .catch((error) => {\n        console.log(error);\n      });\n\n    axios.get('http://localhost:4000/citas/servicios-mecanico-por-dia/'+filtro)\n      .then(res => {\n        this.setState({\n          lista_asignaciones: res.data\n        });\n        console.log(this.state.lista_asignaciones);\n      })      \n      .catch((error) => {\n        console.log(error);\n      });\n\n  }\n\n  onChangeFechadesde(e) {\n    console.log('desde '+e.target.value)\n    this.setState({ fecha_desde: e.target.value })\n    this.obtenerDatosReportes(e.target.value, this.state.fecha_hasta)\n  }\n\n  onChangeFechahasta(e) {\n    console.log('hasta '+e.target.value)\n    this.setState({ fecha_hasta: e.target.value })\n    this.obtenerDatosReportes(this.state.fecha_desde, e.target.value)\n  }\n\n  componentDidMount() {\n    this.obtenerDatosReportes(this.state.fecha_desde, this.state.fecha_hasta)\n  }\n\n  DataTable() {\n    if(this.state.lista_asignaciones.length > 0 )\n      return this.state.lista_asignaciones.map((res, i) => {\n        return <CitaReporteTableRow obj={res} key={i} />;\n      });\n    else\n      return <h4>No existen asignaciones para servicio en este rango de fechas</h4>\n  }\n\n  \n  render() {\n    return (<div>\n\n      <Table>\n        <thead>\n          <tr>\n            <th><h1>Reportes</h1></th>            \n          </tr>\n        </thead>\n      </Table>\n\n      <Table>\n        <thead>\n          <tr>\n            <td>\n              <Form.Group controlId=\"Desde\">\n                <Form.Label><strong>Desde</strong></Form.Label>\n                <Form.Control type=\"Date\" value={this.state.fecha_desde} onChange={this.onChangeFechadesde} required/>\n              </Form.Group>\n            </td>\n            <td>\n              <Form.Group controlId=\"Hasta\">\n                <Form.Label><strong>Hasta</strong></Form.Label>\n                <Form.Control type=\"Date\" value={this.state.fecha_hasta} onChange={this.onChangeFechahasta} required/>\n              </Form.Group>\n            </td>            \n          </tr>\n        </thead>\n      </Table>\n\n      <Table>\n        <thead>\n          <tr>\n            <td>\n              <Form.Group controlId=\"ServicioMas\">\n                <Form.Label><strong>Servicio mas solicitado</strong></Form.Label>\n                <div>\n                  <Form.Label>{this.state.servicio_mas.nombre}{' '}</Form.Label>\n                </div>\n                <div>\n                  <Form.Label><strong>Total:</strong> {this.state.servicio_mas.conteo}</Form.Label>\n                </div>\n              </Form.Group>\n            </td>\n            <td>\n              <Form.Group controlId=\"ServicioMenos\">\n                <Form.Label><strong>Servicio menos solicitado</strong></Form.Label>\n                <div>\n                  <Form.Label>{this.state.servicio_menos.nombre}{' '}</Form.Label>\n                </div>\n                <div>\n                  <Form.Label><strong>Total:</strong> {this.state.servicio_menos.conteo}</Form.Label>\n                </div>\n              </Form.Group>\n            </td>\n            <td>\n              <Form.Group controlId=\"ServiciosCompletos\">\n                <Form.Label><strong>Servicios completos</strong></Form.Label>                \n                <div>\n                  <Form.Label><strong>Total:</strong> {this.state.servicios_completos}</Form.Label>\n                </div>\n              </Form.Group>\n            </td>\n          </tr>\n        </thead>\n      </Table>\n      <Table striped bordered hover>\n        <thead>\n          <tr>\n            <th><h2>Lista de Mecanicos y sus asignaciones por dia</h2></th>            \n          </tr>\n        </thead>\n      </Table>\n      {this.DataTable()}\n    </div>);\n  }\n}"]},"metadata":{},"sourceType":"module"}