{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucas\\\\Downloads\\\\Macautec-Jeimy-Cliente\\\\src\\\\components\\\\agenda-component.js\";\nimport React from 'react';\nimport { ReactAgenda, guid } from 'react-agenda';\nimport axios from 'axios';\nimport Table from 'react-bootstrap/Table'; //https://github.com/revln9/react-agenda AQUI LA GUIA PARA LA AGENDA\n\nrequire('../../node_modules/moment/locale/es.js');\n\nvar filtroColor = {\n  \"Revisi贸n de frenos\": \"0\",\n  \"Pastillas\": \"1\",\n  \"Discos\": \"2\",\n  \"Suspensi贸n\": \"3\",\n  \"Amortiguadores\": \"4\",\n  \"Cambio de aceite\": \"5\",\n  \"Alineaci贸n\": \"6\",\n  \"Rotaci贸n de llantas\": \"7\" //saque los colores de aca .\n  //https://www.rapidtables.com/web/color/RGB_Color.html\n\n};\nvar colors = {\n  '0': \"rgba(102, 195, 131 , 1)\",\n  \"1\": \"rgba(242, 177, 52, 1)\",\n  \"2\": \"rgba(235, 85, 59, 1)\",\n  \"3\": \"rgba(102, 102, 255, 1)\",\n  \"4\": \"rgba(102, 255, 102, 1)\",\n  \"5\": \"rgba(255, 255, 102, 1)\",\n  \"6\": \"rgba(255, 153, 51, 1)\",\n  \"7\": \"rgba(102, 255, 178, 1)\"\n};\nvar now = new Date();\nvar items = [];\nvar host = window.location.host;\nconsole.log(host);\nexport default class Agenda extends React.Component {\n  constructor(props) {\n    super(props);\n    axios.get('http://localhost:4000/citas/').then(res => {\n      var data = res.data;\n      var items = [];\n\n      for (var i = 0; i < data.length; i++) {\n        var dat = data[i].fecha;\n        dat = dat.split('T');\n        dat = dat[0].split('-');\n        var fechaAgendaInicio = new Date(dat[0], dat[1] - 1, dat[2], data[i].hora);\n        var fechaAgendaFin = new Date(dat[0], dat[1] - 1, dat[2], parseInt(data[i].hora) + parseInt(data[i].servicio.duracionhoras));\n        var agendaItem = {\n          _id: guid(),\n          id: data[i]._id,\n          name: data[i].servicio.nombre + ': ' + data[i].mecanico.nombre + ', ' + data[i].estado,\n          startDateTime: fechaAgendaInicio,\n          endDateTime: fechaAgendaFin,\n          classes: filtroColor[data[i].servicio.nombre] //console.log(agendaItem)\n\n        };\n        items.push(agendaItem);\n      }\n\n      this.setState({\n        items: items\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n    this.state = {\n      items: items,\n      selected: [],\n      cellHeight: 30,\n      showModal: false,\n      locale: \"es\",\n      rowsPerHour: 2,\n      numberOfDays: 5,\n      startDate: new Date()\n    };\n    this.handleCellSelection = this.handleCellSelection.bind(this);\n    this.handleItemEdit = this.handleItemEdit.bind(this);\n    this.handleRangeSelection = this.handleRangeSelection.bind(this);\n  }\n\n  handleCellSelection(item) {\n    console.log('handleCellSelection', item);\n  }\n\n  handleItemEdit(item) {\n    window.location.href = \"/editar-cita/\" + item.id;\n  }\n\n  handleRangeSelection(item) {\n    console.log('handleRangeSelection', item);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Agenda general \", host))))), React.createElement(ReactAgenda, {\n      minDate: new Date(now.getFullYear(), now.getMonth() - 3, now.getDate()),\n      maxDate: new Date(now.getFullYear(), now.getMonth() + 3, now.getDate()),\n      disablePrevButton: false,\n      startDate: this.state.startDate,\n      cellHeight: this.state.cellHeight,\n      locale: this.state.locale,\n      items: this.state.items,\n      numberOfDays: this.state.numberOfDays,\n      rowsPerHour: this.state.rowsPerHour,\n      itemColors: colors,\n      autoScale: false,\n      fixedHeader: true,\n      onItemEdit: this.handleItemEdit.bind(this),\n      onCellSelect: this.handleCellSelection.bind(this),\n      onRangeSelection: this.handleRangeSelection.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\lucas\\Downloads\\Macautec-Jeimy-Cliente\\src\\components\\agenda-component.js"],"names":["React","ReactAgenda","guid","axios","Table","require","filtroColor","colors","now","Date","items","host","window","location","console","log","Agenda","Component","constructor","props","get","then","res","data","i","length","dat","fecha","split","fechaAgendaInicio","hora","fechaAgendaFin","parseInt","servicio","duracionhoras","agendaItem","_id","id","name","nombre","mecanico","estado","startDateTime","endDateTime","classes","push","setState","catch","error","state","selected","cellHeight","showModal","locale","rowsPerHour","numberOfDays","startDate","handleCellSelection","bind","handleItemEdit","handleRangeSelection","item","href","render","getFullYear","getMonth","getDate"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { ReactAgenda , guid } from 'react-agenda';\nimport axios from 'axios';\nimport Table from 'react-bootstrap/Table';\n\n//https://github.com/revln9/react-agenda AQUI LA GUIA PARA LA AGENDA\n\nrequire('../../node_modules/moment/locale/es.js')\n\nvar filtroColor = {\n  \"Revisi贸n de frenos\":\"0\",\n  \"Pastillas\":\"1\",\n  \"Discos\":\"2\",\n  \"Suspensi贸n\":\"3\",\n  \"Amortiguadores\":\"4\",\n  \"Cambio de aceite\":\"5\",\n  \"Alineaci贸n\":\"6\",\n  \"Rotaci贸n de llantas\":\"7\"\n}\n\n//saque los colores de aca .\n//https://www.rapidtables.com/web/color/RGB_Color.html\nvar colors= {\n  '0':\"rgba(102, 195, 131 , 1)\" ,\n  \"1\":\"rgba(242, 177, 52, 1)\" ,\n  \"2\":\"rgba(235, 85, 59, 1)\" ,\n  \"3\":\"rgba(102, 102, 255, 1)\" ,\n  \"4\":\"rgba(102, 255, 102, 1)\" ,\n  \"5\":\"rgba(255, 255, 102, 1)\" ,\n  \"6\":\"rgba(255, 153, 51, 1)\" ,\n  \"7\":\"rgba(102, 255, 178, 1)\" \n}\n\nvar now = new Date();\nvar items = [];\n\nvar host = window.location.host; \nconsole.log(host);\n\nexport default class Agenda extends React.Component {\n    constructor(props){\n    super(props);\n         \n      axios.get('http://localhost:4000/citas/')\n      .then(res => {        \n        var data = res.data;         \n        var items = []\n        \n        for(var i=0; i < data.length; i++){\n\n          var dat = data[i].fecha;\n          dat = dat.split('T');\n          dat = dat[0].split('-');\n\n          var fechaAgendaInicio = new Date(dat[0],dat[1] - 1,dat[2],data[i].hora);\n          var fechaAgendaFin = new Date(dat[0],dat[1] - 1,dat[2],parseInt(data[i].hora) + parseInt(data[i].servicio.duracionhoras));\n\n          var agendaItem = { \n            _id:guid(), \n            id: data[i]._id, \n            name: data[i].servicio.nombre + ': '+data[i].mecanico.nombre +', '+data[i].estado, \n            startDateTime: fechaAgendaInicio,\n            endDateTime   : fechaAgendaFin,\n            classes : filtroColor[data[i].servicio.nombre]\n          }\n          //console.log(agendaItem)\n          items.push(agendaItem);\n\n        }        \n        this.setState({\n          items: items\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n\n      this.state = {\n        items:items,\n        selected:[],\n        cellHeight:30,\n        showModal:false,\n        locale:\"es\",\n        rowsPerHour:2,\n        numberOfDays:5,\n        startDate: new Date()\n      }\n      this.handleCellSelection = this.handleCellSelection.bind(this)\n      this.handleItemEdit = this.handleItemEdit.bind(this)\n      this.handleRangeSelection = this.handleRangeSelection.bind(this)\n    }\n  \n  handleCellSelection(item){\n\n    console.log('handleCellSelection',item)\n\n  }\n  handleItemEdit(item){\n    window.location.href = \"/editar-cita/\"+item.id;\n  }\n  handleRangeSelection(item){\n    console.log('handleRangeSelection', item)\n  }\n    render() {\n      return (\n        <div>\n          <Table>\n            <thead>\n              <tr>\n                <th><h1>Agenda general {host}</h1></th>\n              </tr>\n            </thead>\n          </Table>\n          <ReactAgenda\n            minDate={new Date(now.getFullYear(), now.getMonth()-3, now.getDate())}\n            maxDate={new Date(now.getFullYear(), now.getMonth()+3, now.getDate())}\n            disablePrevButton={false}\n            startDate={this.state.startDate}\n            cellHeight={this.state.cellHeight}\n            locale={this.state.locale}\n            items={this.state.items}\n            numberOfDays={this.state.numberOfDays}\n            rowsPerHour={this.state.rowsPerHour}\n            itemColors={colors}\n            autoScale={false}\n            fixedHeader={true}\n            onItemEdit={this.handleItemEdit.bind(this)}\n            onCellSelect={this.handleCellSelection.bind(this)}\n            onRangeSelection={this.handleRangeSelection.bind(this)}/>\n        </div>\n      );\n    }\n  }"]},"metadata":{},"sourceType":"module"}